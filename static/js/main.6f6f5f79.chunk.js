(this.webpackJsonpena_log=this.webpackJsonpena_log||[]).push([[0],{15:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p}));var a,r=n(8),s=n(18),c=n.n(s),l=n(32),i=n(17),o=n(44),u=n.n(o),m=Object(i.b)("fetchKeys",Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://ctt.pfstr.de/json/filehashes.json");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),d=Object(i.b)("readENALog",function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise((function(e,a){n.onerror=function(){n.abort(),a(new DOMException("Error parsing input file."))},n.onload=function(){e(n.result)},n.readAsText(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(i.c)({name:"diagnosisKeys",initialState:{keys:[],status:"uninitialized",enastatus:"uninitialized",exposures:{}},reducers:{resetENA:function(e,t){e.exposures={},e.enastatus="uninitialized"}},extraReducers:(a={},Object(r.a)(a,m.pending,(function(e,t){e.status="loading"})),Object(r.a)(a,m.fulfilled,(function(e,t){e.status="loaded",e.keys=t.payload})),Object(r.a)(a,m.rejected,(function(e,t){e.status="error"})),Object(r.a)(a,d.pending,(function(e,t){e.enastatus="loading"})),Object(r.a)(a,d.fulfilled,(function(t,n){var a=JSON.parse(n.payload),r="DeviceProductType"in a,s=r?a.ExposureChecks:a;s.map((function(n){if((r?n.MatchCount:n.matchesCount)>0){var a=r?n.Hash.toLowerCase():e.from(n.hash,"base64").toString("hex").toLowerCase();if(!(a in t.exposures)){var s=r?n.RandomIDCount:n.keyCount;t.exposures[a]={date:t.keys[a],keysInFileCount:s,matches:[]}}}})),s.map((function(n){var a=r?n.MatchCount:n.matchesCount,s=r?n.Hash.toLowerCase():e.from(n.hash,"base64").toString("hex").toLowerCase();if(a>0||s in t.exposures){var c=r?n.Timestamp:n.timestamp;t.exposures[s].matches.push({timestamp:c,count:a})}})),t.enastatus="loaded"})),Object(r.a)(a,d.rejected,(function(e,t){e.enastatus="error"})),a)}),p=f.actions.resetENA;t.a=f.reducer}).call(this,n(59).Buffer)},25:function(e,t,n){},49:function(e,t,n){e.exports=n(85)},54:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),c=n.n(s),l=(n(54),n(8)),i=n(29),o=n(47),u=n(10),m=n(46),d=n(19),f=n(20),p=n(21),b=n(13),E=n(16),h=n(27),g=n(15),j=n(48),O=(n(25),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.diagnosisKeys.status})),n=Object(u.c)((function(e){return e.diagnosisKeys.enastatus})),s=Object(u.c)((function(e){return e.diagnosisKeys.exposures})),c=Object(a.useCallback)((function(t){"uninitialized"===n&&1===t.length&&e(Object(g.c)(t[0]))}),[e,n]),l=Object(j.a)({onDrop:c}),i=l.getRootProps,o=l.getInputProps;Object(a.useEffect)((function(){e(Object(g.b)())}),[e]);var m=[];Object.keys(s).map((function(e){m.push([e,s[e].date])}));var d=m.sort((function(e,t){return e[1]>t[1]?1:-1}));return"loading"===t||"uninitialized"===t?r.a.createElement(b.a,{className:"mainRow"},r.a.createElement(E.a,null,r.a.createElement(p.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Lade Diagnoseschl\xfcssel...")))):"error"===t?r.a.createElement(b.a,{className:"mainRow"},r.a.createElement(E.a,null,r.a.createElement("p",null,"Ein Fehler ist beim Laden der Diagnoseschl\xfcsselinformationen aufgetreten."))):r.a.createElement(b.a,{className:"mainRow"},r.a.createElement(E.a,null,"uninitialized"===n&&r.a.createElement("div",i({className:"dropzone"}),r.a.createElement("input",o()),r.a.createElement("p",null,"Um Begegnungsdateien zu analysieren, klicken oder ziehen.")),"loading"===n&&r.a.createElement(p.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Lade Begegnungslog...")),"loaded"===n&&0===d.length&&r.a.createElement("p",null,"Es sind keine Begegnungen mit positiv getester Person in der Log-Datei gespeichert."),"loaded"===n&&d.length>0&&d.map((function(e){var t=e[0],n=e[1];return r.a.createElement("div",null,r.a.createElement(b.a,{className:"mt-4"},r.a.createElement(E.a,null,"Schl\xfcsseldatei vom ",n," mit ",s[t].keysInFileCount," Schl\xfcsseln:")),r.a.createElement(h.a,{className:"ml-4 mt-2",striped:!0,bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("th",null,"Anzahl Treffer"),r.a.createElement("th",null,"\xdcberpr\xfcfungszeitpunkt")),r.a.createElement("tbody",null,s[t].matches.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.count),r.a.createElement("td",null,e.timestamp))})))))}))))}),k=function(){return r.a.createElement(b.a,{className:"mainRow"},r.a.createElement(b.a,null,r.a.createElement(E.a,null,r.a.createElement("p",null,"Der Quelltext dieser Applikation findet sich auf ",r.a.createElement("a",{href:"https://github.com/felixlen/ena_log",target:"_blank"},"GitHub")," unter MIT-Lizenz."),r.a.createElement("p",null,"Herzlichen Dank an ",r.a.createElement("a",{href:"https://pfstr.de",target:"_blank"},"Jan Pfister")," f\xfcr das Bereitstellen der Datenschl\xfcsseldatei."),r.a.createElement("p",null,"(c) 2020 ",r.a.createElement("a",{href:"https://www.felixlenders.de",target:"_blank"},"Felix Lenders"),"."))))};n(81);var v=function(){var e=Object(u.b)(),t=Object(a.useState)({home:!0,info:!1}),n=Object(o.a)(t,2),s=n[0],c=n[1],p=function(e){c((function(t){return Object.entries(t).reduce((function(t,n){return Object(i.a)(Object(i.a)({},t),{},Object(l.a)({},n[0],n[0]===e))}),{})}))};return r.a.createElement(m.a,null,r.a.createElement(d.a,{bg:"light"},r.a.createElement(d.a.Brand,null,"Corona Exposure Notification Log Analysis"),r.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(f.a,{className:"mr-auto"},r.a.createElement(f.a.Link,{onClick:function(){return p("home")}},"Home"),r.a.createElement(f.a.Link,{onClick:function(){return p("info")}},"Informationen"),r.a.createElement(f.a.Link,{onClick:function(){return e(Object(g.d)())}},"Zur\xfccksetzen")))),s.home&&r.a.createElement(O,null),s.info&&r.a.createElement(k,null))},y=n(17),x=Object(y.a)({reducer:{diagnosisKeys:g.a}});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:x},r.a.createElement(v,null))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.6f6f5f79.chunk.js.map