(this.webpackJsonpena_log=this.webpackJsonpena_log||[]).push([[0],{15:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b}));var a,r=n(8),s=n(18),c=n.n(s),l=n(32),i=n(17),u=n(45),o=n.n(u),m=n(43).DateTime,d=Object(i.b)("fetchKeys",Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("https://ctt.pfstr.de/json/filehashes.json");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),f=Object(i.b)("readENALog",function(){var e=Object(l.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise((function(e,a){n.onerror=function(){n.abort(),a(new DOMException("Error parsing input file."))},n.onload=function(){e(n.result)},n.readAsText(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(i.c)({name:"diagnosisKeys",initialState:{keys:{},status:"uninitialized",enastatus:"uninitialized",exposures:{}},reducers:{resetENA:function(e,t){e.exposures={},e.enastatus="uninitialized"}},extraReducers:(a={},Object(r.a)(a,d.pending,(function(e,t){e.status="loading"})),Object(r.a)(a,d.fulfilled,(function(e,t){e.status="loaded",e.keys=t.payload})),Object(r.a)(a,d.rejected,(function(e,t){e.status="error"})),Object(r.a)(a,f.pending,(function(e,t){e.enastatus="loading"})),Object(r.a)(a,f.fulfilled,(function(t,n){var a=JSON.parse(n.payload),r="DeviceProductType"in a,s=r?a.ExposureChecks:a;s.map((function(n){if((r?n.MatchCount:n.matchesCount)>0){var a=r?n.Hash.toLowerCase():e.from(n.hash,"base64").toString("hex").toLowerCase();if(!(a in t.exposures)){var s=r?n.RandomIDCount:n.keyCount;t.exposures[a]={date:t.keys[a],keysInFileCount:s,matches:[]}}}})),s.map((function(n){var a=r?n.MatchCount:n.matchesCount,s=r?n.Hash.toLowerCase():e.from(n.hash,"base64").toString("hex").toLowerCase();if(a>0||s in t.exposures){var c=r?m.fromFormat(n.Timestamp,"yyyy-MM-dd HH:mm:ss ZZZ").toISO():m.fromFormat(n.timestamp,"dd. LLLL yyyy, HH:mm").toISO();t.exposures[s].matches.push({timestamp:c,count:a})}})),t.enastatus="loaded"})),Object(r.a)(a,f.rejected,(function(e,t){e.enastatus="error"})),a)}),b=p.actions.resetENA;t.a=p.reducer}).call(this,n(60).Buffer)},25:function(e,t,n){},50:function(e,t,n){e.exports=n(86)},55:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),c=n.n(s),l=(n(55),n(8)),i=n(29),u=n(48),o=n(9),m=n(47),d=n(19),f=n(20),p=n(21),b=n(13),g=n(16),E=n(27),h=n(15),O=n(49),j=(n(25),n(43).DateTime),y=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.diagnosisKeys.status})),n=Object(o.c)((function(e){return e.diagnosisKeys.enastatus})),s=Object(o.c)((function(e){return e.diagnosisKeys.exposures})),c=Object(a.useCallback)((function(t){"uninitialized"===n&&1===t.length&&e(Object(h.c)(t[0]))}),[e,n]),l=Object(O.a)({onDrop:c}),i=l.getRootProps,u=l.getInputProps;Object(a.useEffect)((function(){e(Object(h.b)())}),[e]);var m=[];Object.keys(s).map((function(e){m.push([e,s[e].date])}));var d=m.sort((function(e,t){return e[1]>t[1]?1:-1}));return"loading"===t||"uninitialized"===t?r.a.createElement(b.a,{className:"mainRow"},r.a.createElement(g.a,null,r.a.createElement(p.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Lade Diagnoseschl\xfcssel...")))):"error"===t?r.a.createElement(b.a,{className:"mainRow"},r.a.createElement(g.a,null,r.a.createElement("p",null,"Beim Laden der Diagnoseschl\xfcsselinformationen ist ein Fehler aufgetreten."))):r.a.createElement(b.a,null,r.a.createElement(g.a,null,"uninitialized"===n&&r.a.createElement("div",i({className:"dropzone"}),r.a.createElement("input",u()),r.a.createElement("p",null,"Um Begegnungs\xfcberpr\xfcfungsdatei zu analysieren, klicken oder ziehen.")),"loading"===n&&r.a.createElement(p.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Lade Begegnungs\xfcberpr\xfcfungsdatei")),"error"===n&&r.a.createElement("p",null,"Beim Laden der Begegnungs\xfcberpr\xfcfungen ist ein Fehler aufgetreten."),"loaded"===n&&0===d.length&&r.a.createElement("p",null,"Bei Begegnungs\xfcberpr\xfcfungen wurden keine Treffer mit positiv getester Person gefunden."),"loaded"===n&&d.length>0&&d.map((function(e){var t=e[0],n=j.fromISO(e[1]).toLocaleString(j.DATE_MED_WITH_WEEKDAY);return r.a.createElement("div",null,r.a.createElement(b.a,{className:"mt-4"},r.a.createElement(g.a,null,"Schl\xfcsseldatei vom ",n," mit ",s[t].keysInFileCount," Schl\xfcsseln:")),r.a.createElement(E.a,{className:"ml-4 mt-2",striped:!0,bordered:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("th",null,"Anzahl Treffer"),r.a.createElement("th",null,"\xdcberpr\xfcfungszeitpunkt")),r.a.createElement("tbody",null,s[t].matches.map((function(e){var t=j.fromISO(e.timestamp).toLocaleString(j.DATETIME_SHORT);return r.a.createElement("tr",null,r.a.createElement("td",null,e.count),r.a.createElement("td",null,t))})))))}))))},k=function(){return r.a.createElement(b.a,{className:"mainRow"},r.a.createElement(b.a,null,r.a.createElement(g.a,null,r.a.createElement("p",null,"Der Quelltext dieser Applikation findet sich auf ",r.a.createElement("a",{href:"https://github.com/felixlen/ena_log",target:"_blank"},"GitHub")," unter MIT-Lizenz."),r.a.createElement("p",null,"Herzlichen Dank an ",r.a.createElement("a",{href:"https://pfstr.de",target:"_blank"},"Jan Pfister")," f\xfcr das Bereitstellen der Datenschl\xfcsseldatei."),r.a.createElement("p",null,"(c) 2020 ",r.a.createElement("a",{href:"https://www.felixlenders.de",target:"_blank"},"Felix Lenders"),"."))))};n(82);var v=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.diagnosisKeys.enastatus})),n=Object(a.useState)({home:!0,info:!1}),s=Object(u.a)(n,2),c=s[0],p=s[1],b=function(e){p((function(t){return Object.entries(t).reduce((function(t,n){return Object(i.a)(Object(i.a)({},t),{},Object(l.a)({},n[0],n[0]===e))}),{})}))};return r.a.createElement(m.a,null,r.a.createElement(d.a,{bg:"light",expand:"lg"},r.a.createElement(d.a.Brand,null,"CWA Begegnungs\xfcberpr\xfcfungen"),r.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(f.a,{className:"mr-auto"},r.a.createElement(f.a.Link,{onClick:function(){return b("home")}},"Home"),r.a.createElement(f.a.Link,{onClick:function(){return b("info")}},"Information"),"uninitialized"!==t&&r.a.createElement(f.a.Link,{onClick:function(){return e(Object(h.d)())}},"Zur\xfccksetzen")))),c.home&&r.a.createElement(y,null),c.info&&r.a.createElement(k,null))},x=n(17),w=Object(x.a)({reducer:{diagnosisKeys:h.a}});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:w},r.a.createElement(v,null))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.aee5ce23.chunk.js.map